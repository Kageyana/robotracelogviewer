clc
clear
close all

% パラメータ
boostSpeeds = [ 2.400000
                2.400000
                2.400000
                2.400000
                2.400000
                1.200000
                1.000000
                1.000000
                1.000000
                1.600000
                1.200000
                2.400000
                1.800000
                1.800000
                1.400000
                1.200000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                1.400000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                1.000000
                2.400000
                1.400000
                1.200000
                1.000000
                1.000000
                1.000000
                1.200000
                1.600000
                1.400000
                1.600000
                2.400000
                1.800000
                2.400000
                2.400000
                1.800000
                1.800000
                2.400000
                2.400000
                1.800000
                1.800000
                2.400000
                1.800000
                2.400000
                2.400000
                2.400000
                2.400000
                1.800000
                1.000000
                1.600000
                1.000000
                2.400000
                2.400000
                2.400000
                2.400000
                2.400000
                2.400000
                2.400000
                2.400000
                1.800000
                2.400000
                1.800000
];

times = [   528
            558
            578
            598
            618
            648
            678
            708
            738
            778
            818
            848
            878
            908
            938
            968
            998
            1038
            1078
            1108
            1148
            1178
            1218
            1258
            1288
            1318
            1348
            1378
            1408
            1438
            1478
            1518
            1548
            1578
            1608
            1638
            1668
            1698
            1728
            1758
            1788
            1818
            1848
            1868
            1898
            1928
            1958
            1988
            2018
            2048
            2078
            2108
            2128
            2158
            2188
            3198
            3228
            3258
            3298
            3338
            3378
            3418
            3458
            3508
            3558
            3608
            3658
            3708
            3758
            3808
            3858
            3928
];

distances = [   39769
                42755
                44640
                46477
                48333
                51220
                53398
                55453
                57499
                59827
                62181
                64169
                65999
                67822
                69829
                71828
                73847
                76167
                78527
                80422
                82630
                84579
                86924
                89421
                91292
                93133
                95108
                97007
                98900
                100791
                102947
                105459
                107311
                109251
                111372
                113322
                115311
                117489
                119588
                121683
                124016
                126168
                128363
                130169
                132451
                134762
                137880
                140253
                142639
                145225
                147596
                149984
                151844
                154311
                156791
                229351
                231290
                233326
                235582
                237776
                239692
                241508
                243373
                245434
                247548
                249590
                251521
                253521
                255427
                257459
                259321
                261160                                                                  
    ];
MACHINEACCELE = 13.7;
MACHINEDECREACE = 13.3;
CALCDISTANCE = 0.03;


% 前処理
adjustSpeed = boostSpeeds;
times = times ./1000;

% 解析
for i = 2:size(adjustSpeed,1)
    t_el = CALCDISTANCE / (adjustSpeed(i) - adjustSpeed(i-1));
    acceleration = (adjustSpeed(i) - adjustSpeed(i-1)) / abs(t_el);

    if acceleration > MACHINEACCELE
        adjustSpeed(i) = adjustSpeed(i-1) + (MACHINEACCELE*CALCDISTANCE);
    end
end

for i = size(adjustSpeed,1)-1:-1:1
    t_el = CALCDISTANCE / (adjustSpeed(i) - adjustSpeed(i+1));
    acceleration = (adjustSpeed(i) - adjustSpeed(i+1)) / abs(t_el);

    if acceleration > MACHINEDECREACE
        adjustSpeed(i) = adjustSpeed(i+1) + (MACHINEDECREACE*CALCDISTANCE);
    end
end

plot(boostSpeeds)
ylim([0 3])
hold on
plot(adjustSpeed)